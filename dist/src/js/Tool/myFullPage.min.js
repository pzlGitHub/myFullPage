$.fn.extend({myFullPage:function(config){var colorsArray=config.colorsArray;var ImagesArray=config.backgroundImageArray;var $W=$(this);var $Section=$W.find(".section");var commonStyle={width:"100%",height:"100%"};var clientWidth=$(window).outerWidth();var clientHeight=$(window).outerHeight();var curIndex=0;var lrIndex=0;var lock=true;$("html").add("body").css({position:"relative",overflow:"hidden",margin:0}).add($W).add($Section).css(commonStyle);$W.css({position:"absolute",left:0,top:0});$Section.each(function(index,ele){$(ele).css({backgroundImage:"url("+ImagesArray[index]+")",position:"relative"}).find(".slide").css({float:"left",width:clientWidth,height:clientHeight,position:"relative"}).wrapAll('<div class="slideWrapper"></div>')});console.log(clientWidth);$Section.find(".slideWrapper").each(function(index,ele){$(ele).css({width:$(ele).find(".slide").length*clientWidth,height:clientHeight})});$Section.eq(0).addClass("active").end().find(".slideWrapper").css({position:"absolute",left:0,top:0}).each(function(index,ele){$(ele).find(".slide").eq(0).addClass("innerActive")});$(document).on("keydown",function(e){if(e.which==38||e.which==40){if(lock){lock=false;var newTop=$W.offset().top;var direction="";if(e.which==38&&curIndex!=0){direction="top";config.onLeave(curIndex,direction);curIndex--;newTop+=clientHeight}else if(e.which==40&&curIndex!=$Section.length-1){direction="bottom";config.onLeave(curIndex,direction);curIndex++;newTop-=clientHeight}$W.animate({top:newTop},350,"swing",function(){lock=true;$Section.eq(curIndex).addClass("active");if(direction=="top"){$Section.eq(curIndex+1).removeClass("active")}else if(direction=="bottom"){$Section.eq(curIndex-1).removeClass("active")}config.afterLoad(curIndex,direction)})}}if(e.which==37||e.which==39){if(lock){lock=false;var $SW=$(".active").find(".slideWrapper");var curShowDom=$SW.find(".innerActive");var newLeft=0;$(".active").find(".slideWrapper").length!=0?newLeft=$SW.offset().left:lock=true;var direction=null;if(e.which==37&&curShowDom.index()!=0){newLeft+=clientWidth;direction="left"}else if(e.which==39&&curShowDom.index()!=$SW.find(".slide").length-1){newLeft-=clientWidth;direction="right"}$SW.animate({left:newLeft},200,"swing",function(){lock=true;direction!=null?curShowDom.removeClass("innerActive"):"";if(direction=="left"){curShowDom.prev().addClass("innerActive")}else if(direction=="right"){curShowDom.next().addClass("innerActive")}})}}})}});